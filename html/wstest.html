<!DOCTYPE html>
<html>
    <body>

        <!--
        
        -->



        <p>message div</p>

        <div id="messageDiv" style="overflow-y:scroll; height:400px;border-style:solid;border-width:1px;"></div>

        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

        <script>


            function WebSocketTest()
            {
                if ("WebSocket" in window)
                {
//               alert("WebSocket is supported by your Browser!");

                    // Let us open a web socket
                    var ws = new WebSocket("ws://192.168.0.5:8080");

                    ws.onopen = function ()
                    {
                        document.getElementById("messageDiv").innerHTML += "websocket readystate=" + ws.readyState + " <br>";
                        // Web Socket is connected, send data using send()
                        ws.send("Message1\n");
                                                ws.send("Message2\n");
                                                                        ws.send("Message3\n");
                    };

                    ws.onmessage = function (evt)
                    {
                        var received_msg = evt.data;
                        document.getElementById("messageDiv").innerHTML += "received=" + received_msg + " <br>";
                    };

                    ws.onerror = function ()
                    {

                        alert("websocket error!..");
                    };

                    ws.onclose = function (evt)
                    {
document.getElementById("messageDiv").innerHTML += "closed code="+evt.close+" reason="+evt.reason+" <br>";
                        
                        alert("Connection is closed...");
                    };
                }

                else
                {
                    // The browser doesn't support WebSocket
                    alert("WebSocket NOT supported by your Browser!");
                }
            }

            $(document).ready(function () {

                document.getElementById("messageDiv").innerHTML = "document ready <br>";
                WebSocketTest("ws://localhost:8885");
            }
            );


        </script>

    </body>
</html>
